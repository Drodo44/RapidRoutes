_app-347ab0502d96f6e9.js:34 [Supabase Client] Browser client initialized
_app-347ab0502d96f6e9.js:1 AuthContext: Initializing auth system...
_app-347ab0502d96f6e9.js:34 ✅ Supabase initialized: true
_app-347ab0502d96f6e9.js:34 ✅ Supabase URL configured: true
_app-347ab0502d96f6e9.js:34 AppContent loading state: {loading: true, isAuthenticated: false, hasSession: false}
_app-347ab0502d96f6e9.js:1 Auth state change: SIGNED_IN 389fa9a8-50e8-401f-a896-c9004ec99356
_app-347ab0502d96f6e9.js:1 AuthContext: Fetching profile for auth state change, user ID: 389fa9a8-50e8-401f-a896-c9004ec99356
_app-347ab0502d96f6e9.js:34 AppContent loading state: {loading: true, isAuthenticated: false, hasSession: true}
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
_app-347ab0502d96f6e9.js:1 AuthContext: Profile loaded from auth change: {id: '389fa9a8-50e8-401f-a896-c9004ec99356', status: 'approved', role: 'Admin', email: 'aconnellan@tql.com'}
_app-347ab0502d96f6e9.js:1 AuthContext: Auth change complete, setting loading to false
_app-347ab0502d96f6e9.js:34 AppContent loading state: {loading: false, isAuthenticated: true, hasSession: true}
_app-347ab0502d96f6e9.js:1 AuthContext: Initial session check: {hasSession: true, userId: '389fa9a8-50e8-401f-a896-c9004ec99356'}
_app-347ab0502d96f6e9.js:1 AuthContext: Fetching initial profile for user: 389fa9a8-50e8-401f-a896-c9004ec99356
_app-347ab0502d96f6e9.js:34 AppContent loading state: {loading: false, isAuthenticated: true, hasSession: true}
_app-347ab0502d96f6e9.js:1 Auth state change: INITIAL_SESSION 389fa9a8-50e8-401f-a896-c9004ec99356
_app-347ab0502d96f6e9.js:1 AuthContext: Fetching profile for auth state change, user ID: 389fa9a8-50e8-401f-a896-c9004ec99356
_app-347ab0502d96f6e9.js:34 AppContent loading state: {loading: false, isAuthenticated: true, hasSession: true}
_app-347ab0502d96f6e9.js:1 AuthContext: Initial profile loaded: {id: '389fa9a8-50e8-401f-a896-c9004ec99356', status: 'approved', role: 'Admin', email: 'aconnellan@tql.com'}
_app-347ab0502d96f6e9.js:1 AuthContext: Setting loading to false
_app-347ab0502d96f6e9.js:1 AuthContext: Profile loaded from auth change: {id: '389fa9a8-50e8-401f-a896-c9004ec99356', status: 'approved', role: 'Admin', email: 'aconnellan@tql.com'}
_app-347ab0502d96f6e9.js:1 AuthContext: Auth change complete, setting loading to false
lanes-1fadea88b4228990.js:1 Initial load effect triggered
lanes-1fadea88b4228990.js:1 Loading lane lists...
Fetch finished loading: POST "<URL>".
Fetch finished loading: POST "<URL>".
Fetch finished loading: POST "<URL>".
Fetch finished loading: POST "<URL>".
Fetch finished loading: POST "<URL>".
Fetch finished loading: POST "<URL>".
Fetch finished loading: POST "<URL>".
lanes-1fadea88b4228990.js:1 Lists loaded successfully - Current: 6 Archive: 50
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] Batch submitting options for 6 lanes (parallel: false, batchId: batch-1761595237896-ale3ugt) null
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] Submitting options for lane c92691ee-0bf9-4349-aeb3-a0ab093f5e0b null
post-options-9139fac8bf92b070.js:1 [LaneIntelligence] Validation done, no re-fetch trigger
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] Submitting options with payload: {laneId: 'c92691ee-0bf9-4349-aeb3-a0ab093f5e0b', originCity: 'Newberry', originState: 'SC', destinationCity: 'Ranson', destinationState: 'WV', …}
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] [LANE-INTELLIGENCE] Bad response: Undefined response from API null
m @ post-options-9139fac8bf92b070.js:1
_ @ post-options-9139fac8bf92b070.js:1
await in _
x @ post-options-9139fac8bf92b070.js:1
await in x
d @ post-options-9139fac8bf92b070.js:1
await in d
E @ post-options-9139fac8bf92b070.js:1
eU @ framework-49c6cecf1f6d5795.js:1
eH @ framework-49c6cecf1f6d5795.js:1
(anonymous) @ framework-49c6cecf1f6d5795.js:1
re @ framework-49c6cecf1f6d5795.js:1
rn @ framework-49c6cecf1f6d5795.js:1
(anonymous) @ framework-49c6cecf1f6d5795.js:1
oN @ framework-49c6cecf1f6d5795.js:1
eF @ framework-49c6cecf1f6d5795.js:1
ro @ framework-49c6cecf1f6d5795.js:1
nU @ framework-49c6cecf1f6d5795.js:1
nD @ framework-49c6cecf1f6d5795.js:1
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] Submitting options for lane 7e677ff2-7478-4123-adc2-e598f7ffd197 null
post-options-9139fac8bf92b070.js:1 [LaneIntelligence] Validation done, no re-fetch trigger
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] Submitting options with payload: {laneId: '7e677ff2-7478-4123-adc2-e598f7ffd197', originCity: 'Mansfield', originState: 'AR', destinationCity: 'Eau Claire', destinationState: 'WI', …}
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] [LANE-INTELLIGENCE] Bad response: Undefined response from API null
m @ post-options-9139fac8bf92b070.js:1
_ @ post-options-9139fac8bf92b070.js:1
await in _
x @ post-options-9139fac8bf92b070.js:1
await in x
d @ post-options-9139fac8bf92b070.js:1
await in d
E @ post-options-9139fac8bf92b070.js:1
eU @ framework-49c6cecf1f6d5795.js:1
eH @ framework-49c6cecf1f6d5795.js:1
(anonymous) @ framework-49c6cecf1f6d5795.js:1
re @ framework-49c6cecf1f6d5795.js:1
rn @ framework-49c6cecf1f6d5795.js:1
(anonymous) @ framework-49c6cecf1f6d5795.js:1
oN @ framework-49c6cecf1f6d5795.js:1
eF @ framework-49c6cecf1f6d5795.js:1
ro @ framework-49c6cecf1f6d5795.js:1
nU @ framework-49c6cecf1f6d5795.js:1
nD @ framework-49c6cecf1f6d5795.js:1
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] Submitting options for lane ff03dcfe-8709-471e-b291-e1e8b7d0b799 null
post-options-9139fac8bf92b070.js:1 [LaneIntelligence] Validation done, no re-fetch trigger
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] Submitting options with payload: {laneId: 'ff03dcfe-8709-471e-b291-e1e8b7d0b799', originCity: 'McDavid', originState: 'FL', destinationCity: 'Schertz', destinationState: 'TX', …}
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] [LANE-INTELLIGENCE] Bad response: Undefined response from API null
m @ post-options-9139fac8bf92b070.js:1
_ @ post-options-9139fac8bf92b070.js:1
await in _
x @ post-options-9139fac8bf92b070.js:1
await in x
d @ post-options-9139fac8bf92b070.js:1
await in d
E @ post-options-9139fac8bf92b070.js:1
eU @ framework-49c6cecf1f6d5795.js:1
eH @ framework-49c6cecf1f6d5795.js:1
(anonymous) @ framework-49c6cecf1f6d5795.js:1
re @ framework-49c6cecf1f6d5795.js:1
rn @ framework-49c6cecf1f6d5795.js:1
(anonymous) @ framework-49c6cecf1f6d5795.js:1
oN @ framework-49c6cecf1f6d5795.js:1
eF @ framework-49c6cecf1f6d5795.js:1
ro @ framework-49c6cecf1f6d5795.js:1
nU @ framework-49c6cecf1f6d5795.js:1
nD @ framework-49c6cecf1f6d5795.js:1
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] Submitting options for lane 7a1d7b60-473e-41b0-b84d-7506513d5500 null
post-options-9139fac8bf92b070.js:1 [LaneIntelligence] Validation done, no re-fetch trigger
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] Submitting options with payload: {laneId: '7a1d7b60-473e-41b0-b84d-7506513d5500', originCity: 'White City', originState: 'OR', destinationCity: 'Fontana', destinationState: 'CA', …}
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] [LANE-INTELLIGENCE] Bad response: Undefined response from API null
m @ post-options-9139fac8bf92b070.js:1
_ @ post-options-9139fac8bf92b070.js:1
await in _
x @ post-options-9139fac8bf92b070.js:1
await in x
d @ post-options-9139fac8bf92b070.js:1
await in d
E @ post-options-9139fac8bf92b070.js:1
eU @ framework-49c6cecf1f6d5795.js:1
eH @ framework-49c6cecf1f6d5795.js:1
(anonymous) @ framework-49c6cecf1f6d5795.js:1
re @ framework-49c6cecf1f6d5795.js:1
rn @ framework-49c6cecf1f6d5795.js:1
(anonymous) @ framework-49c6cecf1f6d5795.js:1
oN @ framework-49c6cecf1f6d5795.js:1
eF @ framework-49c6cecf1f6d5795.js:1
ro @ framework-49c6cecf1f6d5795.js:1
nU @ framework-49c6cecf1f6d5795.js:1
nD @ framework-49c6cecf1f6d5795.js:1
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] Submitting options for lane 46cd5a46-c0ac-4341-9e24-02e27835aa97 null
post-options-9139fac8bf92b070.js:1 [LaneIntelligence] Validation done, no re-fetch trigger
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] Submitting options with payload: {laneId: '46cd5a46-c0ac-4341-9e24-02e27835aa97', originCity: 'White City', originState: 'OR', destinationCity: 'Woodland', destinationState: 'CA', …}
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] [LANE-INTELLIGENCE] Bad response: Undefined response from API null
m @ post-options-9139fac8bf92b070.js:1
_ @ post-options-9139fac8bf92b070.js:1
await in _
x @ post-options-9139fac8bf92b070.js:1
await in x
d @ post-options-9139fac8bf92b070.js:1
await in d
E @ post-options-9139fac8bf92b070.js:1
eU @ framework-49c6cecf1f6d5795.js:1
eH @ framework-49c6cecf1f6d5795.js:1
(anonymous) @ framework-49c6cecf1f6d5795.js:1
re @ framework-49c6cecf1f6d5795.js:1
rn @ framework-49c6cecf1f6d5795.js:1
(anonymous) @ framework-49c6cecf1f6d5795.js:1
oN @ framework-49c6cecf1f6d5795.js:1
eF @ framework-49c6cecf1f6d5795.js:1
ro @ framework-49c6cecf1f6d5795.js:1
nU @ framework-49c6cecf1f6d5795.js:1
nD @ framework-49c6cecf1f6d5795.js:1
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] Submitting options for lane 56642ee2-6cb1-4a13-9398-ff551b08f080 null
post-options-9139fac8bf92b070.js:1 [LaneIntelligence] Validation done, no re-fetch trigger
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] Submitting options with payload: {laneId: '56642ee2-6cb1-4a13-9398-ff551b08f080', originCity: 'Maplesville', originState: 'AL', destinationCity: 'Piney Flats', destinationState: 'TN', …}
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] [LANE-INTELLIGENCE] Bad response: Undefined response from API null
m @ post-options-9139fac8bf92b070.js:1
_ @ post-options-9139fac8bf92b070.js:1
await in _
x @ post-options-9139fac8bf92b070.js:1
await in x
d @ post-options-9139fac8bf92b070.js:1
await in d
E @ post-options-9139fac8bf92b070.js:1
eU @ framework-49c6cecf1f6d5795.js:1
eH @ framework-49c6cecf1f6d5795.js:1
(anonymous) @ framework-49c6cecf1f6d5795.js:1
re @ framework-49c6cecf1f6d5795.js:1
rn @ framework-49c6cecf1f6d5795.js:1
(anonymous) @ framework-49c6cecf1f6d5795.js:1
oN @ framework-49c6cecf1f6d5795.js:1
eF @ framework-49c6cecf1f6d5795.js:1
ro @ framework-49c6cecf1f6d5795.js:1
nU @ framework-49c6cecf1f6d5795.js:1
nD @ framework-49c6cecf1f6d5795.js:1
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] Batch submission complete: 0/6 successful (0.0%) null
_app-347ab0502d96f6e9.js:34 [Supabase Client] Browser client initialized
_app-347ab0502d96f6e9.js:1 AuthContext: Initializing auth system...
_app-347ab0502d96f6e9.js:34 ✅ Supabase initialized: true
_app-347ab0502d96f6e9.js:34 ✅ Supabase URL configured: true
_app-347ab0502d96f6e9.js:34 AppContent loading state: {loading: true, isAuthenticated: false, hasSession: false}
_app-347ab0502d96f6e9.js:1 Auth state change: SIGNED_IN 389fa9a8-50e8-401f-a896-c9004ec99356
_app-347ab0502d96f6e9.js:1 AuthContext: Fetching profile for auth state change, user ID: 389fa9a8-50e8-401f-a896-c9004ec99356
_app-347ab0502d96f6e9.js:34 AppContent loading state: {loading: true, isAuthenticated: false, hasSession: true}
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
_app-347ab0502d96f6e9.js:1 AuthContext: Profile loaded from auth change: {id: '389fa9a8-50e8-401f-a896-c9004ec99356', status: 'approved', role: 'Admin', email: 'aconnellan@tql.com'}
_app-347ab0502d96f6e9.js:1 AuthContext: Auth change complete, setting loading to false
_app-347ab0502d96f6e9.js:34 AppContent loading state: {loading: false, isAuthenticated: true, hasSession: true}
_app-347ab0502d96f6e9.js:1 AuthContext: Initial session check: {hasSession: true, userId: '389fa9a8-50e8-401f-a896-c9004ec99356'}
_app-347ab0502d96f6e9.js:1 AuthContext: Fetching initial profile for user: 389fa9a8-50e8-401f-a896-c9004ec99356
_app-347ab0502d96f6e9.js:34 AppContent loading state: {loading: false, isAuthenticated: true, hasSession: true}
_app-347ab0502d96f6e9.js:1 Auth state change: INITIAL_SESSION 389fa9a8-50e8-401f-a896-c9004ec99356
_app-347ab0502d96f6e9.js:1 AuthContext: Fetching profile for auth state change, user ID: 389fa9a8-50e8-401f-a896-c9004ec99356
_app-347ab0502d96f6e9.js:34 AppContent loading state: {loading: false, isAuthenticated: true, hasSession: true}
_app-347ab0502d96f6e9.js:1 AuthContext: Initial profile loaded: {id: '389fa9a8-50e8-401f-a896-c9004ec99356', status: 'approved', role: 'Admin', email: 'aconnellan@tql.com'}
_app-347ab0502d96f6e9.js:1 AuthContext: Setting loading to false
_app-347ab0502d96f6e9.js:1 AuthContext: Profile loaded from auth change: {id: '389fa9a8-50e8-401f-a896-c9004ec99356', status: 'approved', role: 'Admin', email: 'aconnellan@tql.com'}
_app-347ab0502d96f6e9.js:1 AuthContext: Auth change complete, setting loading to false
lanes-1fadea88b4228990.js:1 Initial load effect triggered
lanes-1fadea88b4228990.js:1 Loading lane lists...
Fetch finished loading: POST "<URL>".
Fetch finished loading: POST "<URL>".
Fetch finished loading: POST "<URL>".
Fetch finished loading: POST "<URL>".
Fetch finished loading: POST "<URL>".
Fetch finished loading: POST "<URL>".
Fetch finished loading: POST "<URL>".
lanes-1fadea88b4228990.js:1 Lists loaded successfully - Current: 6 Archive: 50
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] Batch submitting options for 6 lanes (parallel: false, batchId: batch-1761595237896-ale3ugt) null
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] Submitting options for lane c92691ee-0bf9-4349-aeb3-a0ab093f5e0b null
post-options-9139fac8bf92b070.js:1 [LaneIntelligence] Validation done, no re-fetch trigger
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] Submitting options with payload: {laneId: 'c92691ee-0bf9-4349-aeb3-a0ab093f5e0b', originCity: 'Newberry', originState: 'SC', destinationCity: 'Ranson', destinationState: 'WV', …}
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] [LANE-INTELLIGENCE] Bad response: Undefined response from API null
m @ post-options-9139fac8bf92b070.js:1
_ @ post-options-9139fac8bf92b070.js:1
await in _
x @ post-options-9139fac8bf92b070.js:1
await in x
d @ post-options-9139fac8bf92b070.js:1
await in d
E @ post-options-9139fac8bf92b070.js:1
eU @ framework-49c6cecf1f6d5795.js:1
eH @ framework-49c6cecf1f6d5795.js:1
(anonymous) @ framework-49c6cecf1f6d5795.js:1
re @ framework-49c6cecf1f6d5795.js:1
rn @ framework-49c6cecf1f6d5795.js:1
(anonymous) @ framework-49c6cecf1f6d5795.js:1
oN @ framework-49c6cecf1f6d5795.js:1
eF @ framework-49c6cecf1f6d5795.js:1
ro @ framework-49c6cecf1f6d5795.js:1
nU @ framework-49c6cecf1f6d5795.js:1
nD @ framework-49c6cecf1f6d5795.js:1
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] Submitting options for lane 7e677ff2-7478-4123-adc2-e598f7ffd197 null
post-options-9139fac8bf92b070.js:1 [LaneIntelligence] Validation done, no re-fetch trigger
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] Submitting options with payload: {laneId: '7e677ff2-7478-4123-adc2-e598f7ffd197', originCity: 'Mansfield', originState: 'AR', destinationCity: 'Eau Claire', destinationState: 'WI', …}
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] [LANE-INTELLIGENCE] Bad response: Undefined response from API null
m @ post-options-9139fac8bf92b070.js:1
_ @ post-options-9139fac8bf92b070.js:1
await in _
x @ post-options-9139fac8bf92b070.js:1
await in x
d @ post-options-9139fac8bf92b070.js:1
await in d
E @ post-options-9139fac8bf92b070.js:1
eU @ framework-49c6cecf1f6d5795.js:1
eH @ framework-49c6cecf1f6d5795.js:1
(anonymous) @ framework-49c6cecf1f6d5795.js:1
re @ framework-49c6cecf1f6d5795.js:1
rn @ framework-49c6cecf1f6d5795.js:1
(anonymous) @ framework-49c6cecf1f6d5795.js:1
oN @ framework-49c6cecf1f6d5795.js:1
eF @ framework-49c6cecf1f6d5795.js:1
ro @ framework-49c6cecf1f6d5795.js:1
nU @ framework-49c6cecf1f6d5795.js:1
nD @ framework-49c6cecf1f6d5795.js:1
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] Submitting options for lane ff03dcfe-8709-471e-b291-e1e8b7d0b799 null
post-options-9139fac8bf92b070.js:1 [LaneIntelligence] Validation done, no re-fetch trigger
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] Submitting options with payload: {laneId: 'ff03dcfe-8709-471e-b291-e1e8b7d0b799', originCity: 'McDavid', originState: 'FL', destinationCity: 'Schertz', destinationState: 'TX', …}
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] [LANE-INTELLIGENCE] Bad response: Undefined response from API null
m @ post-options-9139fac8bf92b070.js:1
_ @ post-options-9139fac8bf92b070.js:1
await in _
x @ post-options-9139fac8bf92b070.js:1
await in x
d @ post-options-9139fac8bf92b070.js:1
await in d
E @ post-options-9139fac8bf92b070.js:1
eU @ framework-49c6cecf1f6d5795.js:1
eH @ framework-49c6cecf1f6d5795.js:1
(anonymous) @ framework-49c6cecf1f6d5795.js:1
re @ framework-49c6cecf1f6d5795.js:1
rn @ framework-49c6cecf1f6d5795.js:1
(anonymous) @ framework-49c6cecf1f6d5795.js:1
oN @ framework-49c6cecf1f6d5795.js:1
eF @ framework-49c6cecf1f6d5795.js:1
ro @ framework-49c6cecf1f6d5795.js:1
nU @ framework-49c6cecf1f6d5795.js:1
nD @ framework-49c6cecf1f6d5795.js:1
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] Submitting options for lane 7a1d7b60-473e-41b0-b84d-7506513d5500 null
post-options-9139fac8bf92b070.js:1 [LaneIntelligence] Validation done, no re-fetch trigger
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] Submitting options with payload: {laneId: '7a1d7b60-473e-41b0-b84d-7506513d5500', originCity: 'White City', originState: 'OR', destinationCity: 'Fontana', destinationState: 'CA', …}
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] [LANE-INTELLIGENCE] Bad response: Undefined response from API null
m @ post-options-9139fac8bf92b070.js:1
_ @ post-options-9139fac8bf92b070.js:1
await in _
x @ post-options-9139fac8bf92b070.js:1
await in x
d @ post-options-9139fac8bf92b070.js:1
await in d
E @ post-options-9139fac8bf92b070.js:1
eU @ framework-49c6cecf1f6d5795.js:1
eH @ framework-49c6cecf1f6d5795.js:1
(anonymous) @ framework-49c6cecf1f6d5795.js:1
re @ framework-49c6cecf1f6d5795.js:1
rn @ framework-49c6cecf1f6d5795.js:1
(anonymous) @ framework-49c6cecf1f6d5795.js:1
oN @ framework-49c6cecf1f6d5795.js:1
eF @ framework-49c6cecf1f6d5795.js:1
ro @ framework-49c6cecf1f6d5795.js:1
nU @ framework-49c6cecf1f6d5795.js:1
nD @ framework-49c6cecf1f6d5795.js:1
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] Submitting options for lane 46cd5a46-c0ac-4341-9e24-02e27835aa97 null
post-options-9139fac8bf92b070.js:1 [LaneIntelligence] Validation done, no re-fetch trigger
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] Submitting options with payload: {laneId: '46cd5a46-c0ac-4341-9e24-02e27835aa97', originCity: 'White City', originState: 'OR', destinationCity: 'Woodland', destinationState: 'CA', …}
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] [LANE-INTELLIGENCE] Bad response: Undefined response from API null
m @ post-options-9139fac8bf92b070.js:1
_ @ post-options-9139fac8bf92b070.js:1
await in _
x @ post-options-9139fac8bf92b070.js:1
await in x
d @ post-options-9139fac8bf92b070.js:1
await in d
E @ post-options-9139fac8bf92b070.js:1
eU @ framework-49c6cecf1f6d5795.js:1
eH @ framework-49c6cecf1f6d5795.js:1
(anonymous) @ framework-49c6cecf1f6d5795.js:1
re @ framework-49c6cecf1f6d5795.js:1
rn @ framework-49c6cecf1f6d5795.js:1
(anonymous) @ framework-49c6cecf1f6d5795.js:1
oN @ framework-49c6cecf1f6d5795.js:1
eF @ framework-49c6cecf1f6d5795.js:1
ro @ framework-49c6cecf1f6d5795.js:1
nU @ framework-49c6cecf1f6d5795.js:1
nD @ framework-49c6cecf1f6d5795.js:1
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] Submitting options for lane 56642ee2-6cb1-4a13-9398-ff551b08f080 null
post-options-9139fac8bf92b070.js:1 [LaneIntelligence] Validation done, no re-fetch trigger
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] Submitting options with payload: {laneId: '56642ee2-6cb1-4a13-9398-ff551b08f080', originCity: 'Maplesville', originState: 'AL', destinationCity: 'Piney Flats', destinationState: 'TN', …}
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] [LANE-INTELLIGENCE] Bad response: Undefined response from API null
m @ post-options-9139fac8bf92b070.js:1
_ @ post-options-9139fac8bf92b070.js:1
await in _
x @ post-options-9139fac8bf92b070.js:1
await in x
d @ post-options-9139fac8bf92b070.js:1
await in d
E @ post-options-9139fac8bf92b070.js:1
eU @ framework-49c6cecf1f6d5795.js:1
eH @ framework-49c6cecf1f6d5795.js:1
(anonymous) @ framework-49c6cecf1f6d5795.js:1
re @ framework-49c6cecf1f6d5795.js:1
rn @ framework-49c6cecf1f6d5795.js:1
(anonymous) @ framework-49c6cecf1f6d5795.js:1
oN @ framework-49c6cecf1f6d5795.js:1
eF @ framework-49c6cecf1f6d5795.js:1
ro @ framework-49c6cecf1f6d5795.js:1
nU @ framework-49c6cecf1f6d5795.js:1
nD @ framework-49c6cecf1f6d5795.js:1
post-options-9139fac8bf92b070.js:1 [LANE-INTELLIGENCE] Batch submission complete: 0/6 successful (0.0%) null
// pages/api/laneRecords.js
// Updated: Return real user lanes from the 'lanes' table (not analytics)
// This ensures any existing clients that still call /api/laneRecords get correct, editable rows.

import { withErrorHandler } from '@/lib/apiErrorHandler';

async function handler(req, res) {
  let supabaseAdmin;
  try {
    supabaseAdmin = (await import('@/lib/supabaseAdmin')).default;
  } catch (importErr) {
    console.error('[laneRecords] Failed to import admin client:', importErr);
    return res.status(500).json({ ok: false, error: 'Server initialization failed' });
  }

  const { status, limit, onlyWithSavedCities } = req.query || {};

  const finalStatus = typeof status === 'string' ? status : 'current';
  const finalLimit = Math.max(1, Math.min(Number(limit) || 200, 1000));
  const filterSavedCities = onlyWithSavedCities === '1' || onlyWithSavedCities === 'true';

  let query = supabaseAdmin
    .from('lanes')
    .select('*')
    .order('created_at', { ascending: false })
    .limit(finalLimit);

  if (finalStatus) {
    query = query.eq('lane_status', finalStatus);
  }

  // Filter for lanes with saved cities if requested
  if (filterSavedCities) {
    query = query.not('saved_origin_cities', 'is', null)
                 .not('saved_dest_cities', 'is', null);
  }

  const { data, error } = await query;
  if (error) {
    console.error('[laneRecords] lanes query failed:', error);
    return res.status(500).json({ ok: false, error: 'Failed to load lanes' });
  }

  return res.status(200).json({ ok: true, data: Array.isArray(data) ? data : [] });
}

export default withErrorHandler(handler);
